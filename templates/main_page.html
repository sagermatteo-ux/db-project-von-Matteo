{% extends "base.html" %}
{% block content %}

<ul class="todo-list">
{% for todo in todos %}
<li class="todo-item">

<form method="POST">

Â Â Â Â <input type="hidden" name="id" value="{{ todo[0] }}">

Â Â Â Â <input type="checkbox"
Â Â Â Â Â Â Â Â Â Â Â onchange="this.form.action='/complete'; this.form.submit();">

Â Â Â Â <label>
Â Â Â Â Â Â Â Â {{ todo[2] }}<br>
Â Â Â Â Â Â Â Â <small>ğŸ“ {{ todo[4] }} | Kategorie: {{ todo[3] }}</small>
Â Â Â Â </label>

Â Â Â Â {% if todo[1] != current_user.id %}
Â Â Â Â Â Â Â Â {% if todo[5] %}
Â Â Â Â Â Â Â Â Â Â Â Â <!-- SCHILD: Anfrage bereits geschickt -->
Â Â Â Â Â Â Â Â Â Â Â Â <span class="request-badge">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â âœ” Anfrage geschickt
Â Â Â Â Â Â Â Â Â Â Â Â </span>
Â Â Â Â Â Â Â Â {% else %}
Â Â Â Â Â Â Â Â Â Â Â Â <!-- MIETEN BUTTON -->
Â Â Â Â Â Â Â Â Â Â Â Â <button
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type="submit"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â class="btn btn-success rent-btn"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â onclick="markAsRequested(this)"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â formaction="{{ url_for('rent', material_id=todo[0]) }}">
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Mieten
Â Â Â Â Â Â Â Â Â Â Â Â </button>
Â Â Â Â Â Â Â Â {% endif %}
Â Â Â Â {% endif %}

</form>
</li>
{% else %}
<div>...Keine verÃ¶ffentlichten GegenstÃ¤ndeâ—</div>
{% endfor %}
</ul>

<div class="todo-form">
<form method="POST">
Â Â Â Â <input name="contents" required placeholder="Gegenstand">
Â Â Â Â <select name="category" required>
Â Â Â Â Â Â Â Â <option value="" disabled selected>Kategorie</option>
Â Â Â Â Â Â Â Â <option value="buecher">BÃ¼cher</option>
Â Â Â Â Â Â Â Â <option value="taschenrechner">Taschenrechner</option>
Â Â Â Â Â Â Â Â <option value="lineal_geodreieck">Lineal & Geodreieck</option>
Â Â Â Â Â Â Â Â <option value="zirkel">Zirkel</option>
Â Â Â Â Â Â Â Â <option value="schreibmaterial">Schreibmaterial</option>
Â Â Â Â </select>
Â Â Â Â <input name="location" required placeholder="Ort">
Â Â Â Â <button class="btn btn-primary">HinzufÃ¼gen</button>
</form>
</div>

<!-- STYLES -->
<style>
.request-badge {
Â Â Â Â display: inline-block;
Â Â Â Â padding: 8px 14px;
Â Â Â Â background-color: #f8d7da;
Â Â Â Â color: #842029;
Â Â Â Â border: 2px solid #842029;
Â Â Â Â border-radius: 6px;
Â Â Â Â font-weight: bold;
Â Â Â Â margin-left: 10px;
}

.rent-btn[disabled] {
Â Â Â Â cursor: default;
Â Â Â Â opacity: 0.8;
}
</style>

<!-- JAVASCRIPT -->
<script>
function markAsRequested(button) {
Â Â Â Â button.innerHTML = "âœ” Anfrage geschickt";
Â Â Â Â button.classList.remove("btn-success");
Â Â Â Â button.classList.add("btn-danger");
Â Â Â Â button.disabled = true;
Â Â Â Â button.style.pointerEvents = "none";
}
</script>

{% endblock %}