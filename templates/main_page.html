{% extends "base.html" %}
{% block content %}

<ul class="todo-list" style="list-style: none; padding: 0;">
{% for todo in todos %}
<li style="border: 1px solid #ddd; padding: 10px; margin-bottom: 5px; border-radius: 5px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <label>
            <strong>{{ todo[2] }}</strong><br>
            <small>üìç {{ todo[4] }} | Kategorie: {{ todo[3] }}</small>
        </label>

        {% if todo[1]|string != current_user.id|string %}
            {% if todo[5] > 0 %}
                <span class="request-badge">‚úî Anfrage geschickt</span>
            {% else %}
                <form method="POST" action="{{ url_for('rent', material_id=todo[0]) }}">
                    <button type="submit" class="btn btn-success">Mieten</button>
                </form>
            {% endif %}
        {% else %}
            <small style="color: gray;">(Dein Inserat)</small>
        {% endif %}
    </div>
</li>
{% else %}
<div>...Keine Gegenst√§nde vorhanden ‚ùó</div>
{% endfor %}
</ul>

<div class="todo-form" style="margin-top: 20px; padding: 15px; background: #f9f9f9;">
    <form method="POST">
        <input name="contents" required placeholder="Gegenstand" style="display: block; width: 100%; margin-bottom: 5px;">
        <select name="category" required style="display: block; width: 100%; margin-bottom: 5px;">
            <option value="" disabled selected>Kategorie</option>
            <option value="B√ºcher">B√ºcher</option>
            <option value="Taschenrechner">Taschenrechner</option>
            <option value="Zirkel">Zirkel</option>
            <option value="Schreibmaterial">Schreibmaterial</option>
        </select>
        <input name="location" required placeholder="Ort" style="display: block; width: 100%; margin-bottom: 5px;">
        <button class="btn btn-primary" style="width: 100%;">Hinzuf√ºgen</button>
    </form>
</div>

<style>
.request-badge { padding: 5px; background: #e2e3e5; border-radius: 4px; font-weight: bold; }
.btn { cursor: pointer; padding: 8px; border-radius: 4px; border: none; }
.btn-success { background: #28a745; color: white; }
.btn-primary { background: #007bff; color: white; }
</style>
{% endblock %}

